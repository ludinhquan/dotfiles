#!/bin/bash
cd $HOME
# Install package
sudo pacman -Sy
sudo pacman -S - < ~/dotfiles/programs/.pacman.default

# Install yay
mkdir tmp -p
cd tmp
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si

cd $HOME

yay -S fnm-bin
yay -S xbanish
yay -S brave-bin
yay -S slack-desktop
yay -S teams
yay -S mongodb-bin
yay -S nerd-fonts-fira-code
yay -S picom-git
yay -S cloudflare-warp-bin

# Reload fonts
fc-cache -fv

# Create symlink
cd ~/dotfiles
stow */
stow -D programs

source ~/dotfiles/zsh/.zshenv
source ~/dotfiles/zsh/.config/zsh/.zshrc

sudo chsh -s "$(command -v zsh)" "${USER}"

systemctl enable lightdm
sudo cp ~/dotfiles/wallpaper.jpg /usr/share/pixmaps/
echo "[greeter]" | sudo tee -a /etc/lightdm/lightdm-gtk-greeter.conf
echo "background=/usr/share/pixmaps/wallpaper.jpg" | sudo tee -a /etc/lightdm/lightdm-gtk-greeter.conf

systemctl enable pasystray
systemctl enable bluetooth
systemctl enable ntpd
systemctl enable warp-svc

timedatectl set-ntp true
